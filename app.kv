#:kivy 1.1.1
#:import hex kivy.utils.get_color_from_hex
#:import Svg kivy.graphics.svg.Svg

#:set board_prim "#795C34"
#:set board_sec "#E4D9CA"
<MainScreen>:
    MDBoxLayout:
        board: board
        padding: [5,0,5,0]
        MDBoxLayout:
            orientation: "vertical"
            size_hint_y: None
            height: board.width
            pos_hint: {"center_y":0.5}
            size_hint_x: 0.25
            canvas.before:
                Color:
                    rgba: 0.25, 0.27, 0.27, 1
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [20,]
            MDLabel:
                text:"Moves"
                valign: "top"
                halign: "left"
                padding: [10,10,10,10]
                size_hint_y: 0.075
                text_size: (self.width - 20, self.height)
            MDScrollView:
                size_hint_y: 0.8
                padding: [20,0,20,30]
                MovesList:
        ChessBoard:
            id:board
            padding:[30,0,10,0]
        MDRelativeLayout:
            size_hint_y: 1
            size_hint_x: 0.25
            MDFillRoundFlatIconButton:
                text: "10:00"
                disabled: True
                background_color: hex("#ffffff")
                disabled_color: hex("#ffffff")
                background_disabled_normal: ""
                background_disabled_down: ""
                icon: "clock-outline"
                size_hint_y: .075
                size_hint_x: .35
                pos_hint: {"top": 1-((self.parent.parent.height-board.height)/2)/self.parent.parent.height}
            MDFillRoundFlatIconButton:
                text: "10:00"
                background_color: hex("#ffffff")
                disabled_color: hex("#ffffff")
                disabled: True
                background_disabled_normal: ""
                background_disabled_down: ""
                icon: "clock-outline"
                size_hint_y: .075
                size_hint_x: .35
                pos_hint: {"top": ((self.parent.parent.height-board.height)/2+self.height)/self.parent.parent.height}

<ChessBoardSquare>:
    background_normal: ""
    background_down: ""
    border: [0,0,0,0]
    image:image
    on_press: self.pressAction()
    Image:
        id:image
        size:self.parent.size
        pos:self.parent.pos
        source:''

<ChessPromotionPiece>:
    background_normal: ""
    background_down: ""
    background_color: [1,1,1,0]
    border: [0,0,0,0]
    image:image
    on_press: self.pressAction()
    Image:
        id:image
        size:self.parent.size
        pos:self.parent.pos
        source:''
        fit_mode: 'contain'

<ChessPromotionUI>:
    rows: 3
    cols: 2
    ChessPromotionPiece:
        text: 'q'
    ChessPromotionPiece:
        text: 'r'
    ChessPromotionPiece:
        text: 'b'
    ChessPromotionPiece:
        text: 'n'
    Widget:
        Button:
            text: 'Cancel'
            pos: self.parent.pos
            height: self.parent.height
            width: self.parent.width * 2
            on_press: self.parent.parent.cancel()

<ChessBoard>:
    height: self.width
    size_hint: 0.5, None
    pos_hint: {"center_y":0.5}

<MovesList>:

MainScreen: